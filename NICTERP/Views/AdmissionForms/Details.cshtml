@model NICTERP.Models.View_Models.AdmissionFormViewModel
@{
    ViewBag.Title = "Details";
		<!-- common styles -->
    <link rel="stylesheet" type="text/css" href="~/Content/Dialog Css-js/css/dialog.css" />
		<!-- individual effect -->
    <link rel="stylesheet" type="text/css" href="~/Content/Dialog Css-js/css/dialog-wilma.css" />
    <script src="~/Content/Dialog Css-js/js/modernizr.custom.js"></script>
}
@*<div class="button-wrap"><button data-dialog="InstallmentDialog" onclick="getInstallments()" class="trigger">Open Dialog</button></div>*@
<div>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">@Model.StudentDetail.Name</h4>
                </div>
                <div class="modal-body">
                    <center>
                        <p>
                            <img src="../@Model.StudentDetail.Photo" class="img-thumbnail" alt="Image" />
                        </p>
                    </center>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
    <hr />
    <div class="form-horizontal">
        <h4>Admission Form No. <span class="label label-success">@Model.AdmissionForm.Form_No</span></h4>
        <hr />
        <div id="StudentDetailsContainer" class="container">
            <div class="row ">
                <div class="col-xs-6 form-group container">
                    <div class="row">
                        <div class="col-xs-3">
                            @Html.LabelFor(model => model.StudentDetail.Center)
                        </div>

                        <div class="col-xs-9">
                            @Model.StudentDetail.CenterName.CenterName
                        </div>
                    </div>
                    <div class="row">
                        <h3 class="col-md-10">
                            Reg No. &nbsp;  @{var a = Model.StudentDetail.Center == 1 ? 15 : 30;} @a-@Model.StudentDetail.Reg_No
                        </h3>
                    </div>

                </div>
                <div class="col-xs-6 form-group">
                    <div class="col-md-9 col-xs-offset-3">
                        <img data-toggle="modal" data-target="#myModal" src="../@Model.StudentDetail.Photo" class="img-thumbnail" style="cursor:pointer" width="150" height="100" alt="Image" />
                    </div>
                </div>
            </div>
            <div class="row ">
                <table class="table table-hover">
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Name)
                        </td>
                        <td>@Model.StudentDetail.Name</td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Parents_Name)
                        </td>
                        <td>@Model.StudentDetail.Parents_Name</td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.DOB)
                        </td>
                        <td>
                            @Convert.ToDateTime(Model.StudentDetail.DOB).ToLongDateString()
                        </td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Contact_No)
                        </td>
                        <td>
                            @Model.StudentDetail.Contact_No
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Address)
                        </td>
                        <td>
                            @Model.StudentDetail.Address
                        </td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Email)
                        </td>
                        <td>
                            @Model.StudentDetail.Email
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Occupation)
                        </td>
                        <td>
                            @Model.StudentDetail.Occupation
                        </td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.College_Office_Add)
                        </td>
                        <td>
                            @Model.StudentDetail.College_Office_Add
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Course_Applied)
                        </td>
                        <td>
                            @Model.StudentDetail.Courses.CourseName
                        </td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Duration_Of_Course)
                        </td>
                        <td>
                            @Model.StudentDetail.Duration_Of_Course
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Nationality)
                        </td>
                        <td>
                            @Model.StudentDetail.Nationality
                        </td>
                        <td>
                            @Html.LabelFor(model => model.StudentDetail.Date_Of_Joining)
                        </td>
                        <td>
                            @Convert.ToDateTime(Model.StudentDetail.Date_Of_Joining).ToLongDateString()
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div id="EduDetailsContainer" class="container">
            <div class="row">
                <h3>Education Qualification</h3>
                <table class="table table-responsive">
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.EduQualification.Last_Exam_Passed)</th>
                        <th>@Html.DisplayNameFor(model => model.EduQualification.Year)</th>
                        <th>@Html.DisplayNameFor(model => model.EduQualification.Board_Uni)</th>
                        <th>@Html.DisplayNameFor(model => model.EduQualification.Percentage)</th>
                    </tr>
                    <tr>
                        <td>
                            @Model.EduQualification.Last_Exam_Passed
                        </td>
                        <td>
                            @Model.EduQualification.Year
                        </td>
                        <td>
                            @Model.EduQualification.Board_Uni
                        </td>
                        <td>
                            @Model.EduQualification.Percentage
                        </td>
                    </tr>

                </table>
            </div>
        </div>
        <div id="JobDetailsContainer" class="container">
            <div class="row">
                <h3>Job Experience</h3>
                <table class="table table-responsive">
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.JobExperience.Organization)</th>
                        <th>@Html.DisplayNameFor(model => model.JobExperience.Duration)</th>
                        <th>@Html.DisplayNameFor(model => model.JobExperience.Nature_of_Work)</th>
                        <th>@Html.DisplayNameFor(model => model.JobExperience.Designation)</th>
                    </tr>
                    <tr>
                        <td>
                            @( Model.JobExperience == null ? "N.A" : Model.JobExperience.Organization)
                        </td>
                        <td>
                            @( Model.JobExperience == null ? "N.A" : Model.JobExperience.Duration)
                        </td>
                        <td>
                            @( Model.JobExperience == null ? "N.A" : Model.JobExperience.Nature_of_Work)
                        </td>
                        <td>
                            @( Model.JobExperience == null ? "N.A" : Model.JobExperience.Designation)
                        </td>
                    </tr>

                </table>
            </div>
        </div>
        <div id="KnowledgeOfCompDetailsContainer" class="container">
            <div class="row">
                <h3>Knowledge of Computers</h3>
                <table class="table table-responsive">
                    <tr>
                        <th>@Html.DisplayNameFor(model => model.KnowledgeOfComp.Institution)</th>
                        <th>@Html.DisplayNameFor(model => model.KnowledgeOfComp.Course)</th>
                        <th>@Html.DisplayNameFor(model => model.KnowledgeOfComp.Year)</th>
                        <th>@Html.DisplayNameFor(model => model.KnowledgeOfComp.Modules_Covered)</th>
                        <th>@Html.DisplayNameFor(model => model.KnowledgeOfComp.Percentage)</th>
                    </tr>
                    <tr>
                        <td>
                            @(Model.KnowledgeOfComp == null ? "N.A" : Model.KnowledgeOfComp.Institution)
                        </td>
                        <td>
                            @(Model.KnowledgeOfComp == null ? "N.A" : Model.KnowledgeOfComp.Course)
                        </td>
                        <td>
                            @(Model.KnowledgeOfComp == null ? "N.A" : Model.KnowledgeOfComp.Year.ToString())
                        </td>
                        <td>
                            @(Model.KnowledgeOfComp == null ? "N.A" : Model.KnowledgeOfComp.Modules_Covered)
                        </td>
                        <td>
                            @(Model.KnowledgeOfComp == null ? "N.A" : Model.KnowledgeOfComp.Percentage)
                        </td>
                    </tr>

                </table>
            </div>
        </div>
        <div id="AboutnictDetailsContainer" class="container">
            <div class="row">
                <h3>How did you come to know about NICT?</h3>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Newspaper)">
                    <label><span class="glyphicon glyphicon-check"></span> Newspaper</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Magazine)">
                    <label><span class="glyphicon glyphicon-check"></span> Magazine</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Handouts)">
                    <label><span class="glyphicon glyphicon-check"></span> Handouts</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Hoardings)">
                    <label><span class="glyphicon glyphicon-check"></span> Hoardings</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Posters)">
                    <label><span class="glyphicon glyphicon-check"></span> Posters</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Friends)">
                    <label><span class="glyphicon glyphicon-check"></span> Friends</label>
                </div>
                <div class="col-xs-3" hidden="@(!Model.AboutNICT.Any_Other)">
                    <label><span class="glyphicon glyphicon-check"></span> Any Other</label>
                </div>
            </div>

        </div>
        <div id="controls" class="container hidden-print">
            <div class="row">
                <div class="col-xs-4">
                    <h2><span title="Print" class="btn-primary" style="color:white;padding:10px 10px 5px 10px; cursor:pointer" onclick="window.print()"><i class="glyphicon glyphicon-print"></i></span></h2>
                </div>
                <div class="col-xs-4 bottom" style="color:#0cb724;padding-top:17px;">
                    <div class="button-wrap"><button data-dialog="InstallmentDialog" style="background-color:transparent;border:none;" onclick="getInstallments()" class="trigger"><i class="fa fa-rupee"></i> View/Add Installments</button></div>
                </div>
                <div class="col-xs-4" style="padding-top:17px;">
                    <h5 class="text-info"><a href="/Batch">Allot Batch to @Model.StudentDetail.Name</a></h5>
                </div>
            </div>
        </div>
    </div>
</div>
<br />

<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<div id="InstallmentDialog" class="dialog">
    <div class="dialog__overlay"></div>
    <div class="dialog__content">
        <div class="morph-shape">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 560 280" preserveAspectRatio="none">
                <rect x="3" y="3" fill="none" width="556" height="276" />
            </svg>
        </div>
        <div class="dialog-inner">
            <h2><strong>@Model.StudentDetail.Name's</strong>, Installments</h2>
            <div id="PartialViewList" style="word-wrap:break-word">

            </div>
            <div id="PartialViewCreate" style="word-wrap:break-word">

            </div>
            <div id="msg" style="margin:0">

            </div>
            <div class="modal-footer" style="background-color:white">
                <div><button class="action btn btn-success" data-dialog-close>Close</button></div>
            </div>
            <div id="loader" class="loader" style="width:100%;height:100%;position:absolute;top:0;  left: 0;align-items: center;display: flex;background-color:rgba(0,0,0,0.8);">
                <img src="~/Content/Images/Preloader.gif" style="margin:auto" />
            </div>
        </div>
    </div>
</div>
<script>
    (function () {

        var dlgtrigger = document.querySelector('[data-dialog]'),
            somedialog = document.getElementById(dlgtrigger.getAttribute('data-dialog')),
            dlg = new DialogFx(somedialog);

        dlgtrigger.addEventListener('click', dlg.toggle.bind(dlg));

    })();
</script>
<script>
    var id;
    function getInstallments() {debugger;
        $.post('/Installments/Details', {form_no:@Model.StudentDetail.Form_No}, function (response) {
            $("#PartialViewList").html(response);
        });
        $.get('/Installments/Create',{formno:@Model.StudentDetail.Form_No}, function (response) {
            $("#PartialViewCreate").html(response);
        });
        return true;
    }
    function success(a)
    {debugger;
        var json=jQuery.parseJSON(a);
        if(!json.success)
        {
            $("#msg").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true">&nbsp;</span><span class="sr-only">Error:</span>'+json.errorMsg+'</div>');
        }
        else{
            $.post('/Installments/Details', {form_no:@Model.StudentDetail.Form_No}, function (response) {
                $("#PartialViewList").html(response);
                $("#"+json.id).addClass("alert alert-success");
            });
                    
        }
    }
    function failure()
    {

    }
    $(document).ajaxStart(function(){
        $("#loader").css("visibility","visible")
    });
    $(document).ajaxComplete(function(){
        $("#loader").css("visibility","hidden");
    });
</script>
@section Scripts{
    <script src="~/Content/Dialog Css-js/js/classie.js"></script>
<script src="~/Content/Dialog Css-js/js/dialogFx.js"></script>
    }